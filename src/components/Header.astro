---
const navLinks = [
	{ name: "Home", href: "#home" },
	{ name: "Experience", href: "#experience" },
	{ name: "Skills", href: "#skills" },
	{ name: "Projects", href: "#projects" },
	{ name: "Contact", href: "#contact" },
];
---

<header class="header">
	<div class="container header-container">
		<a href="#home" class="logo">
			<span class="logo-text">Surapat</span>
			<span class="logo-dot">.</span>
		</a>

		<nav class="nav">
			<ul class="nav-list">
				{
					navLinks.map((link) => (
						<li class="nav-item">
							<a href={link.href} class="nav-link">
								{link.name}
							</a>
						</li>
					))
				}
			</ul>
		</nav>

		<button
			class="mobile-menu-btn"
			aria-label="Toggle menu"
			id="mobile-menu-btn"
		>
			<span class="hamburger"></span>
		</button>
	</div>
</header>

<script>
	const mobileMenuBtn = document.getElementById("mobile-menu-btn");
	const nav = document.querySelector(".nav");
	const navLinks = document.querySelectorAll(".nav-link");

	mobileMenuBtn?.addEventListener("click", () => {
		nav?.classList.toggle("nav-open");
		mobileMenuBtn.classList.toggle("menu-open");
	});

	navLinks.forEach((link) => {
		link.addEventListener("click", () => {
			nav?.classList.remove("nav-open");
			mobileMenuBtn?.classList.remove("menu-open");
		});
	});

	// Active section highlighting
	const sections = document.querySelectorAll("section[id]");
	const header = document.querySelector(".header");

	window.addEventListener("scroll", () => {
		let current = "";

		sections.forEach((section) => {
			const htmlSection = section as HTMLElement;
			const sectionTop = htmlSection.offsetTop;
			const sectionHeight = htmlSection.offsetHeight;
			if (scrollY >= sectionTop - 200) {
				current = section.getAttribute("id") || "";
			}
		});

		navLinks.forEach((link) => {
			link.classList.remove("active");
			if (link.getAttribute("href") === `#${current}`) {
				link.classList.add("active");
			}
		});

		// Header background on scroll
		if (window.scrollY > 50) {
			header?.classList.add("header-scrolled");
		} else {
			header?.classList.remove("header-scrolled");
		}
	});
</script>

<style>
	.header {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		padding: 1rem 0;
		transition: all 0.3s ease;
	}

	.header-scrolled {
		background-color: rgba(10, 10, 10, 0.9);
		backdrop-filter: blur(10px);
		border-bottom: 1px solid var(--color-border);
	}

	.header-container {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}

	.logo {
		font-size: 1.5rem;
		font-weight: 700;
		color: var(--color-text-primary);
		text-decoration: none;
	}

	.logo-text {
		background: var(--gradient-blue-text);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.logo-dot {
		color: var(--color-blue-500);
	}

	.nav-list {
		display: flex;
		gap: 2rem;
		list-style: none;
	}

	.nav-link {
		color: var(--color-text-secondary);
		font-size: 0.875rem;
		font-weight: 500;
		text-decoration: none;
		transition: color 0.2s ease;
		position: relative;
	}

	.nav-link:hover,
	.nav-link.active {
		color: var(--color-blue-400);
	}

	.nav-link::after {
		content: "";
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 2px;
		background: var(--gradient-blue);
		transition: width 0.3s ease;
	}

	.nav-link:hover::after,
	.nav-link.active::after {
		width: 100%;
	}

	.mobile-menu-btn {
		display: none;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0.5rem;
		z-index: 1001;
	}

	.hamburger {
		display: block;
		width: 24px;
		height: 2px;
		background-color: var(--color-text-primary);
		position: relative;
		transition: all 0.3s ease;
	}

	.hamburger::before,
	.hamburger::after {
		content: "";
		position: absolute;
		width: 24px;
		height: 2px;
		background-color: var(--color-text-primary);
		transition: all 0.3s ease;
	}

	.hamburger::before {
		top: -8px;
	}

	.hamburger::after {
		top: 8px;
	}

	.menu-open .hamburger {
		background-color: transparent;
	}

	.menu-open .hamburger::before {
		top: 0;
		transform: rotate(45deg);
	}

	.menu-open .hamburger::after {
		top: 0;
		transform: rotate(-45deg);
	}

	@media (max-width: 768px) {
		.mobile-menu-btn {
			display: block;
		}

		.nav {
			position: fixed;
			top: 0;
			right: -100%;
			width: 100%;
			height: 100vh;
			background-color: var(--color-bg-primary);
			padding: 6rem 2rem 2rem;
			transition: right 0.3s ease;
		}

		.nav-open {
			right: 0;
		}

		.nav-list {
			flex-direction: column;
			gap: 1.5rem;
		}

		.nav-link {
			font-size: 1.25rem;
		}
	}
</style>
